document.addEventListener("DOMContentLoaded",()=>{let d=document.getElementById("create-course-form"),c=document.getElementById("courseTitle"),l=document.getElementById("courseDescription"),m=document.getElementById("courseBanner"),u=document.getElementById("courseCardImage"),g=document.getElementById("bannerPreview"),h=document.getElementById("cardPreview"),e=document.getElementById("banner-error"),t=document.getElementById("card-error");function r(e,t,r,o){let a=e.files[0];var n;a?((n=new Image).onload=function(){this.width!==o.width||this.height!==o.height?(r.textContent=`A imagem deve ter exatamente ${o.width}x${o.height} pixels.`,t.style.display="none",e.value=""):(r.textContent="",t.src=URL.createObjectURL(a),t.style.display="block")},n.src=URL.createObjectURL(a)):(t.style.display="none",r.textContent="")}m.addEventListener("change",()=>{r(m,g,e,{width:970,height:250})}),u.addEventListener("change",()=>{r(u,h,t,{width:300,height:200})}),d.addEventListener("submit",async e=>{e.preventDefault();var e=c.value.trim(),t=l.value.trim(),r=m.files[0],o=u.files[0];if(e)if(t)if(r)if(o){var a=new FormData;a.append("title",e),a.append("description",t),a.append("banner",r),a.append("image",o);try{var n,i,s=await fetch(apiUrl+"coursesPostRequest",{method:"POST",body:a});console.log(s),s.ok?"error"===(n=await s.json()).status?alert("Erro ao criar o curso: "+n.message):(alert("Curso criado com sucesso!"),d.reset(),g.style.display="none",h.style.display="none"):(i=await s.json(),alert("Erro ao criar o curso: "+i.message))}catch(e){console.error("Erro na requisição:",e),alert("Erro ao criar o curso")}}else alert("A imagem do card é obrigatória.");else alert("O banner do curso é obrigatório.");else alert("A descrição do curso é obrigatória.");else alert("O título do curso é obrigatório.")})});