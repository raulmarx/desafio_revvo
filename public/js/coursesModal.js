document.addEventListener("DOMContentLoaded",()=>{let s=document.getElementById("create-course-form"),c=document.getElementById("courseTitle"),l=document.getElementById("courseDescription"),m=document.getElementById("courseBanner"),u=document.getElementById("courseCardImage"),g=document.getElementById("bannerPreview"),h=document.getElementById("cardPreview"),e=document.getElementById("banner-error"),t=document.getElementById("card-error");function r(e,t,r,a){let n=e.files[0];var o;n?((o=new Image).onload=function(){this.width!==a.width||this.height!==a.height?(r.textContent=`A imagem deve ter exatamente ${a.width}x${a.height} pixels.`,t.style.display="none",e.value=""):(r.textContent="",t.src=URL.createObjectURL(n),t.style.display="block")},o.src=URL.createObjectURL(n)):(t.style.display="none",r.textContent="")}m.addEventListener("change",()=>{r(m,g,e,{width:970,height:250})}),u.addEventListener("change",()=>{r(u,h,t,{width:300,height:200})}),s.addEventListener("submit",async e=>{e.preventDefault();var e=c.value.trim(),t=l.value.trim(),r=m.files[0],a=u.files[0];if(e)if(t)if(r)if(a){var n=new FormData;n.append("title",e),n.append("description",t),n.append("banner",r),n.append("cardImage",a);try{var o,i,d=await fetch(apiUrl+"coursesPostRequest",{method:"POST",body:n});d.ok?(o=await d.json(),console.log(o),alert("Curso criado com sucesso!"),s.reset(),g.style.display="none",h.style.display="none"):(i=await d.json(),alert("Erro ao criar o curso: "+i.message))}catch(e){console.error("Erro na requisição:",e),alert("Erro ao criar o curso. Tente novamente mais tarde.")}}else alert("A imagem do card é obrigatória.");else alert("O banner do curso é obrigatório.");else alert("A descrição do curso é obrigatória.");else alert("O título do curso é obrigatório.")})});